import{_ as R,r as p,o as $,w as N,h as g,c as o,b as t,i as S,F as k,e as f,j as U,v as L,f as u,t as n,k as i,g as _}from"./index-Cq-r5gHk.js";const V={class:"container"},j={key:0,class:"request-list"},B=["src"],M={class:"timestamp"},P={class:"admin-actions"},D=["onClick"],F=["onClick"],J=["onClick"],O={key:1},T={key:2,class:"request-list"},z=["src"],E={class:"timestamp"},h={class:"admin-actions"},A=["onClick"],G=["onClick"],H={key:3},K={class:"request-list"},Q={class:"solved-label"},W=["src"],X={class:"timestamp"},Y={key:0},Z={key:4,class:"modal-backdrop"},q={class:"modal"},tt={class:"modal-buttons"},st={__name:"Panel",setup(lt){const a=p([]),C=p(""),r=p(""),c=p(null),m=p(!1);$(()=>{const e=localStorage.getItem("requests");e&&(a.value=JSON.parse(e))}),N(a,e=>{localStorage.setItem("requests",JSON.stringify(e))},{deep:!0});function v(e,s){c.value=e,C.value=s,r.value="",s==="Отклонена"?m.value=!0:y(s)}function y(e,s=""){const l=a.value.find(d=>d.id===c.value.id);l&&l.status!=="Решено"&&l.status!=="Отклонена"&&(l.status=e,e==="Отклонена"&&(l.comment=s)),c.value=null,C.value=""}function x(){if(!r.value.trim())return alert("Укажите причину отклонения");y("Отклонена",r.value),m.value=!1}const b=g(()=>a.value.filter(e=>e.status==="Новая")),w=g(()=>a.value.filter(e=>e.status==="Решается")),I=g(()=>a.value.filter(e=>e.status==="Решено"||e.status==="Отклонена"));return(e,s)=>(u(),o("div",V,[s[16]||(s[16]=t("h1",null,"Панель администратора",-1)),s[17]||(s[17]=t("h2",null,"Новые заявки",-1)),b.value.length?(u(),o("div",j,[(u(!0),o(k,null,f(b.value,l=>(u(),o("div",{class:"request",key:l.id},[t("img",{src:l.imageUrl,alt:"Фото"},null,8,B),t("h2",null,n(l.title),1),t("p",null,n(l.description),1),t("p",null,[s[2]||(s[2]=t("strong",null,"Категория:",-1)),i(" "+n(l.category),1)]),t("p",null,[s[3]||(s[3]=t("strong",null,"Пользователь:",-1)),i(" "+n(l.userId),1)]),t("p",null,[s[4]||(s[4]=t("strong",null,"Статус:",-1)),t("span",{class:_("status "+l.status.toLowerCase())},n(l.status),3)]),t("p",M,"Добавлено: "+n(l.timestamp),1),t("div",P,[t("button",{onClick:d=>v(l,"Решается")},"Решается",8,D),t("button",{onClick:d=>v(l,"Решено")},"Решено",8,F),t("button",{onClick:d=>v(l,"Отклонена")},"Отклонить",8,J)])]))),128))])):(u(),o("div",O,s[5]||(s[5]=[t("p",null,"Нет новых заявок.",-1)]))),s[18]||(s[18]=t("h2",null,"Решаются",-1)),w.value.length?(u(),o("div",T,[(u(!0),o(k,null,f(w.value,l=>(u(),o("div",{class:"request",key:l.id},[s[9]||(s[9]=t("div",{class:"solved-label"},"РЕШАЕТСЯ",-1)),t("img",{src:l.imageUrl,alt:"Фото"},null,8,z),t("h2",null,n(l.title),1),t("p",null,n(l.description),1),t("p",null,[s[6]||(s[6]=t("strong",null,"Категория:",-1)),i(" "+n(l.category),1)]),t("p",null,[s[7]||(s[7]=t("strong",null,"Пользователь:",-1)),i(" "+n(l.userId),1)]),t("p",null,[s[8]||(s[8]=t("strong",null,"Статус:",-1)),t("span",{class:_("status "+l.status.toLowerCase())},n(l.status),3)]),t("p",E,"Добавлено: "+n(l.timestamp),1),t("div",h,[t("button",{onClick:d=>v(l,"Решено")},"Решено",8,A),t("button",{onClick:d=>v(l,"Отклонена")},"Отклонить",8,G)])]))),128))])):(u(),o("div",H,s[10]||(s[10]=[t("p",null,"Нет заявок со статусом «Решается».",-1)]))),s[19]||(s[19]=t("h2",null,"Решённые заявки",-1)),t("div",K,[(u(!0),o(k,null,f(I.value,l=>(u(),o("div",{class:"request",key:l.id},[t("div",Q,n(l.status.toUpperCase()),1),t("img",{src:l.imageUrl,alt:"Фото"},null,8,W),t("h2",null,n(l.title),1),t("p",null,n(l.description),1),t("p",null,[s[11]||(s[11]=t("strong",null,"Категория:",-1)),i(" "+n(l.category),1)]),t("p",null,[s[12]||(s[12]=t("strong",null,"Пользователь:",-1)),i(" "+n(l.userId),1)]),t("p",null,[s[13]||(s[13]=t("strong",null,"Статус:",-1)),t("span",{class:_("status "+l.status.toLowerCase())},n(l.status),3)]),t("p",X,"Добавлено: "+n(l.timestamp),1),l.comment?(u(),o("p",Y,[s[14]||(s[14]=t("strong",null,"Комментарий:",-1)),i(" "+n(l.comment),1)])):S("",!0)]))),128))]),m.value?(u(),o("div",Z,[t("div",q,[s[15]||(s[15]=t("p",null,"Укажите причину отклонения:",-1)),U(t("textarea",{"onUpdate:modelValue":s[0]||(s[0]=l=>r.value=l),placeholder:"Комментарий..."},null,512),[[L,r.value]]),t("div",tt,[t("button",{class:"yes-btn",onClick:x},"Подтвердить"),t("button",{class:"no-btn",onClick:s[1]||(s[1]=l=>m.value=!1)},"Отмена")])])])):S("",!0)]))}},et=R(st,[["__scopeId","data-v-5d57d616"]]);export{et as default};
